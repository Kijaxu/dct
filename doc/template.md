== Mission Template Directory Format

DCT relies on content that can be built directly in the mission editor, these
individuals need little to no programming stills to provide content to a DCT
enabled mission.

The directory hierarchy is:

    + <Mission Template Directory>
      - theater.goals
      + <Region Directory 1>
        - region.def
        + [bases]
        + [facilities]
        + [missions]
      + <Region Directory N>
        - region.def
        + [bases]
        + [facilities]
        + [missions]




# Templates

## Usage

A template represents a non-unique DCT game object. These objects can be
copied to represent unique game objects within the DCT/DCS game world. The
primary usage for Template objects is to validate user/mission-creator
provided game data in a consisitent and common way. This removes the
responsability of Asset objects from having to perform this validation each
time.

## Storage

Templates are stored in a combination of `.dct` (known as 'DCT files') and
`.stm` (known as 'STM files') files with the same named file, but with
different post-fix comprise the entire template definition. DCT files are
the only files needed to fully define a template. STM files come from the
DCS mission editor's static template feature, which allows a mission
designer to compose groups of DCS objects in a semi-visual way without having
to redo the work over-and-over in new mission files.

## Attributes - General

_NOTE:_ Things noted as required mean the DCT file associated with the
template must define the attribute.

### `objtype`

 * _required:_ yes
 * _value:_ string

Defines the type of game object (Asset) that will be created from the
template. Allowed values can be found in src/dct/enum.lua in the `assetType`
table.

### `name`

 * _required:_ depends
 * _value:_ string

The name of the template. This name can be used to lookup the template from
the Region object. If the template uses an STM file then the name field of the
STM template will be used. This name fields is editable in the mission editor.
If the template is an airbase type the name must reference an airbase object
in the game world or define a tpldata to spawn a new airbase. This airbase
validation is not done at template definition time and is instead done at
asset creation time, thus it is a non-fatal error generating a warning in
the log file. The asset will not be created if the name or tpldata is
incorrect or does not exist.

### `regionname`

 * _required:_ depends
 * _value:_ string

The region name the template belongs to. If a template is created outside the
theater definition directory this region will need to be defined.

### `coalition`

 * _required:_ depends
 * _value:_ "red", "blue", "neutral" (case doen't matter) or their numerical
   equivalents[\[1\]][1]
 * _default:_ the coalition the DCS groups/statics belong too or this field is
   **required**

A template can only belong to a single coalition (side) and any DCS
groups/statics not belonging to the same side as the first group will cause a
fatal error. This can be confusing sometimes when a template is attempted
to be used across different missions. Your mission designer should come up
with a standard country set for each coalition.

### `desc`

 * _required:_ no
 * _value:_ string

This is a text string field used to provide the 'target briefing' text when a
mission is assigned to a player. This text can use string replacement to make
certian parts of the message variable, the replacement fields are:

 * `LOCATIONMETHOD` - provides a randomly selected description of how the
   target was discovered.
 * `TOT` - replaces with the expected time-on-target

### `tpldata`

 * _required:_ depends
 * _value:_ table
 * _default:_ autogenerated if STM is provided otherwise required if DCS
   in-game objects need to be associated with the template

For templates that are not associated with an STM file the format of `tpldata`
follows:

	tpldata = {
	  category = {
	    # = {
	      countryid = id,
	      data      = {
	        # group def members
	        dct_deathgoal = goalspec
	}}}}

See [tpldata details][tpldata_details] for more information on specification
of death goals and naming criteria.

### `uniquenames`

 * _required:_ no
 * _value:_ boolean
 * _default:_ false

When a template can represent more than one instance of an Asset this
attribute should be set to `true` so when a new Asset is created the names of
the DCS objects are made unique. This way when the DCS objects are dynamically
spawned DCS will not despawn previously spawned objects because they have the
same name.

### `priority`

 * _required:_ no
 * _value:_ number, lower means higher priority
 * _default:_ depending on `objtype` an appropriate value will be selected

This field defines the relative priority to other templates/assets within the
region. A lower non-negative number means higher priority.

### `primary`

 * _required:_ no
 * _value:_ `true` or `false`
 * _default:_ `false`

Defines if an Asset created from this template is considered a 'primary'.
Depending on the overall theater goals all or a percentage of all primary
targets must be destroyed.

### `intel`

 * _required:_ no
 * _value:_ `0` to `5`
 * _default:_ `0`

Defines the initial amount of 'intel' the opposing side knows about any assets
generated from the template. The intel value is a direct representation to how
many decimal places the location of the asset will be truncated to[\[2\]][2].

### `spawnalways`

 * _required:_ no
 * _value:_ `true` or `false`
 * _default:_ `false`

Used to identify templates that should always be spawned, the value should
always be 'true' or removed from the template definition.

### `exclusion`

 * _required:_ no
 * _value:_ string

Used to mark templates that should not be spawned together. If the templates
have the same string value the templates will be grouped together and only
one template from the exclusion group will be selected. All other members
of the group will be ignored.

## Attributes - Type Specific

### Airspace

#### `location`

 * _required:_ yes
 * _value:_ table

Is the centroid where the airspace is located.

#### `volume`

 * _required:_ yes
 * _value:_ table

Is a DCS volume spec[\[3\]][3] defining the airspace being taken up.

### Airbase

#### `defenses`

 * _required:_ no
 * _value:_ table or string

The name(s) of the templates to use as airbase defense groups used to protect
and control which side an airbase/farp belongs to.

### Squadron

## Template Data - DCS Object Definition

[1]: https://wiki.hoggitworld.com/view/DCS_enum_coalition "Hoggit Wiki - Coalition Table"
[2]: https://en.wikipedia.org/wiki/Decimal_degrees "Decimal degrees"
[3]: https://wiki.hoggitworld.com/view/DCS_func_searchObjects "DCS Volume Spec"
